<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="google-adsense-account" content="ca-pub-3650229640310116">
  <title>Contact | LearnComputers</title>
  
  <!-- SweetAlert2 Library -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <style>
    :root {
      --bg: #0a0f1f;
      --card-bg: rgba(255, 255, 255, 0.08);
      --text: #fff;
      --accent: #00aaff;
      --glow: 0 0 20px rgba(0, 170, 255, 0.4);
    }
    body {
      font-family: 'Inter', sans-serif;
      background: radial-gradient(circle at top left, #101935, #060a14);
      color: var(--text);
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }

    /* üåê NAVIGATION ‚Äî identical to homepage */
    nav {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: rgba(10, 15, 30, 0.7);
      backdrop-filter: blur(20px);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 7%;
      z-index: 1000;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
    }
    nav .logo {
      font-size: 1.6rem;
      font-weight: 700;
      color: var(--accent);
    }
    nav ul {
      list-style: none;
      display: flex;
      gap: 25px;
      margin: 0;
      padding: 0;
    }
    nav ul li a {
      text-decoration: none;
      color: #ccc;
      font-weight: 500;
      transition: 0.3s;
    }
    nav ul li a:hover, nav ul li a.active {
      color: var(--accent);
    }
    .nav-actions {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    .login-btn {
      background: var(--accent);
      color: white;
      padding: 8px 18px;
      border-radius: 12px;
      text-decoration: none;
      font-weight: 600;
      transition: 0.3s;
      box-shadow: var(--glow);
    }
    .login-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 25px rgba(0, 170, 255, 0.8);
    }
    #darkModeToggle {
      background: none;
      border: 2px solid var(--accent);
      color: var(--accent);
      border-radius: 10px;
      padding: 6px 10px;
      cursor: pointer;
      transition: 0.3s;
    }
    #darkModeToggle:hover {
      background: var(--accent);
      color: white;
    }

    /* üì¨ CONTACT SECTION */
    .contact-section {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 150px 20px 80px;
      gap: 40px;
    }

    .contact-card {
      background: var(--card-bg);
      padding: 35px;
      border-radius: 20px;
      backdrop-filter: blur(15px);
      width: 100%;
      max-width: 600px;
      box-shadow: var(--glow);
    }

    .contact-card h2 {
      color: var(--accent);
      margin-bottom: 15px;
      font-size: 1.8rem;
      text-shadow: 0 0 20px rgba(0,170,255,0.4);
    }

    .contact-info p {
      color: #b0c4de;
      line-height: 1.6;
      font-size: 1rem;
      margin: 8px 0;
    }

    .contact-info a {
      color: var(--accent);
      text-decoration: none;
      font-weight: 600;
    }
    .contact-info a:hover {
      text-decoration: underline;
    }

    .contact-form form {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .contact-form input,
    .contact-form textarea {
      padding: 12px 15px;
      border-radius: 10px;
      border: none;
      outline: none;
      background: rgba(255,255,255,0.1);
      color: white;
      font-size: 1rem;
      resize: none;
    }
    
    .contact-form input:focus,
    .contact-form textarea:focus {
        box-shadow: 0 0 10px rgba(0,170,255,0.3);
        background: rgba(255,255,255,0.15);
    }

    .contact-form button {
      padding: 12px;
      border: none;
      border-radius: 10px;
      background: var(--accent);
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
      box-shadow: var(--glow);
    }
    .contact-form button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 25px rgba(0,170,255,0.8);
    }
    
    /* SweetAlert Dark Mode Fix */
    .swal2-popup {
        background: #1a2035 !important;
        color: #fff !important;
        border: 1px solid var(--accent) !important;
    }
    .swal2-title { color: #fff !important; }
    .swal2-content { color: #ccc !important; }

    /* ‚ö° FOOTER */
    footer {
      text-align: center;
      padding: 25px;
      background: rgba(10,15,25,0.8);
      backdrop-filter: blur(10px);
      font-size: 0.9rem;
      color: #aaa;
    }
  </style>
  
  <!-- Firebase SDKs -->
  <script type="module">
        // --- MANDATORY: Global variables provided by the environment ---
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        
        // --- CORRECT FIREBASE CONFIGURATION ---
        const knownFirebaseConfig = {
            apiKey: "AIzaSyBGsPfMlXGVMLazt4UahGyVzW2b1H1RyLA",
            authDomain: "learncomputers-f88f1.firebaseapp.com",
            projectId: "learncomputers-f88f1",
            storageBucket: "learncomputers-f88f1.firebasestorage.app",
            messagingSenderId: "5443256661",
            appId: "1:5443256661:web:a2230e7ee2c96749866fdc", 
            measurementId: "G-XRFCTMV5FJ"
        };
        
        const firebaseConfig = typeof __firebase_config !== 'undefined' 
            ? JSON.parse(__firebase_config) 
            : knownFirebaseConfig;

        // Imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { 
            getAuth, 
            onAuthStateChanged, 
            signInWithCustomToken, 
            signInAnonymously
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Initialize
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        let currentUser = null;
        
        // --- AUTH STATE LISTENER ---
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                currentUser = user;
                // If logged in, update the Nav and pre-fill email
                updateNav(true);
                if (user.email) {
                    const emailField = document.getElementById('email');
                    if (emailField) emailField.value = user.email;
                }
            } else {
                // If NOT logged in, attempt anonymous login for database access
                currentUser = null;
                updateNav(false);
                
                // We need to sign in anonymously so the user has permission to write to the database
                try {
                    if (initialAuthToken) {
                         await signInWithCustomToken(auth, initialAuthToken);
                    } else {
                         await signInAnonymously(auth);
                    }
                } catch (e) {
                    console.error("Anon auth failed", e);
                }
            }
        });

        function updateNav(isLoggedIn) {
            const navActions = document.querySelector('.nav-actions');
            if (isLoggedIn && navActions) {
                // Change Login button to Profile if logged in
                const loginBtn = navActions.querySelector('.login-btn');
                if (loginBtn) {
                    loginBtn.textContent = 'Profile';
                    loginBtn.href = 'profile.html';
                }
            }
        }

        // --- FORM SUBMISSION ---
        const contactForm = document.getElementById('contactForm');
        if (contactForm) {
            contactForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                const submitBtn = e.target.querySelector('button');
                const originalBtnText = submitBtn.textContent;
                submitBtn.textContent = 'Sending...';
                submitBtn.disabled = true;

                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const message = document.getElementById('message').value;

                // --- LOGGING FOR DEBUGGING ---
                const collectionPath = `artifacts/${appId}/public/data/contact_messages`;
                console.log(`Attempting to save message to path: ${collectionPath}`);
                
                try {
                    // Define collection path
                    const messagesRef = collection(db, collectionPath);
                    
                    const docRef = await addDoc(messagesRef, {
                        name: name,
                        email: email,
                        message: message,
                        userId: currentUser ? currentUser.uid : 'anonymous',
                        userEmail: currentUser ? currentUser.email : 'anonymous',
                        timestamp: serverTimestamp()
                    });

                    console.log(`‚úÖ Message successfully saved with ID: ${docRef.id}`);
                    
                    Swal.fire({
                        title: "‚úÖ Message Sent!",
                        text: "Thank you for reaching out. We'll reply as soon as possible.",
                        icon: "success",
                        confirmButtonColor: "#00aaff"
                    });
                    e.target.reset();
                    
                    // Re-fill email if logged in
                    if (currentUser && currentUser.email) {
                        document.getElementById('email').value = currentUser.email;
                    }

                } catch (error) {
                    console.error("‚ùå Error sending message: ", error);
                    // Check for permission errors and log the user status
                    if (error.code === 'permission-denied') {
                        console.error("SECURITY RULE CHECK: Current User Status:", currentUser ? `UID: ${currentUser.uid}, Email: ${currentUser.email || 'N/A'}` : 'Not Authenticated');
                    }
                    Swal.fire({
                        title: "Error",
                        text: "Could not send message. Please try again later.",
                        icon: "error",
                        confirmButtonColor: "#d33"
                    });
                } finally {
                    submitBtn.textContent = originalBtnText;
                    submitBtn.disabled = false;
                }
            });
        }
  </script>

  <!-- No external stylesheet link needed as per request -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>
  <!-- üîù PERFECT TOP NAV -->
  <nav>
    <div class="logo">üíª Learn<span style="color:#fff;">Computers</span></div>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="learning.html">Learn</a></li>
      <li><a href="community.html">Community</a></li>
      <li><a href="resources.html">Resources</a></li>
      <li><a href="stories.html">Stories</a></li>
      <li><a href="chatbot.html">AI Chat</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="contact.html" class="active">Contact</a></li>
    </ul>
    <div class="nav-actions">
      <a href="login.html" class="login-btn">Login</a>
      <button id="darkModeToggle">üåô</button>
    </div>
  </nav>

  <!-- üí¨ CONTACT CONTENT -->
  <section class="contact-section">
    <div class="contact-card contact-info">
      <h2>üì© Get in Touch</h2>
      <p><strong>Email:</strong> support@learncomputers.com</p>
      <p><strong>Phone:</strong> +91 98765 43210</p>
      <p><strong>Office:</strong> Tech Park, Thrissur, Kerala</p>
      <p>We‚Äôre always here to guide you in your learning journey.  
      Have questions? Drop us a message below or visit our <a href="community.html">Community</a>.</p>
    </div>

    <div class="contact-card contact-form">
      <h2>üí¨ Send a Message</h2>
      <form id="contactForm">
        <input type="text" id="name" placeholder="Your Name" required>
        <input type="email" id="email" placeholder="Your Email" required>
        <textarea id="message" rows="6" placeholder="Write your message..." required></textarea>
        <button type="submit">Send</button>
      </form>
    </div>
  </section>

  <footer>¬© 2025 LearnComputers. All rights reserved.</footer>

</body>
</html>